const {
  ADD, MUL
} = require('../src/rotate')

const ROUND_100 = x => Math.round(x * 100) / 100
const ROUND_10 = x => Math.round(x * 10) / 10

const ORIGIN = [8340, 2220, 7960]

const nodes = [
  // => 1.3s: lotus_cr
  // 1 ｜
  // => 1.3s: [-26.56, ]
  // event: rg_close
  // event: lotus_open

  [8340, 8640.15, 7959.99],

  // => 1.3s: lotus_open

  [8340, 13137.15, 12815.9],

  // => 1.3s
  // 3 | 3 | 1
  // => 1.9s (1.3 + 0.6): [-76.61, ]
  // => 0.6s: [-71.98, ]

  [8340, 15175.34, 18937.32],

  // => 0.6s + pause 2s
  // 1 | 1 |
  // => 0.4s (0.3 + 0.2): []
  // => 0.3s: [56.03, ]

  [8340, 17840.05, 18947],

  // => 1.2s: ufo_up
  // 1 | 1
  // => 0.6s: [80.82]

  [8340, 19436.95, 13157.14],

  // => 1.2s (0.8 + 0.4)
  // 2 | 1
  // => 1.4s (0.6 + 0.8): [39.92, -2.91, 3.47]

  [7758.37, 23732.66, 8884.9],

  // => 1.6s: ufo_offset
  // 1 |
  // => 2s (0.4 + 1.6): [3.19, , 90]: ufo_ro2

  [504.12, 27193.25, 8924.52],

  // => 1.5s: ufo_ro3
  // 1 |
  // => 1.5s: [8.42, 0, 135.29]: ufo_ro4

  [-6454.18, 24744.82, 8263.44],

  // => 1.6s: ufo_down
  // 1 |
  // => 1.6s: [12.21, 0, 180]

  [-9510.63, 17241.99, 6802.24],

  // => 1.6s (1 + 0.6)
  // 3 | 2
  // => 1s: [11.34, -1.64, -151.93]

  [-5848.23, 10052.83, 5187.22],

  // => 1.9s (1.1 + 0.8): ufo_soffset
  // 4 | 3
  // => 1.7s (0.6 + 1.1): [-1.95, 0, -90]: ufo_sro2

  [3444.47, 9786.03, 5574.65],

  // => 1.8s (1.2 + 0.6):
  // 2 | 1
  // => 2s (0.8 + 1.2): [-20.25]: ufo_cl

  [5192.23, 18059.66, 8684.26],

  // => 2.9s (0.6 + 2.3)
  // 1 | 4
  // => 1.2s (0.6 + 0.6): [-15.90, -0.27, 58.23]: ufo_ro4

  [-6967.89, 24440.54, 13073.99],

  // => 3.1s (1.1 + 1.6 + 0.4)
  // 3 ｜ 4.5 ｜ 1
  // => 3.4s (2.3 + 1.1): [-20.34, -0.73, 66.74]
  // => 1.6s: [-41.45, 0, 90]

  // 15
  [-20310.88, 28261.52, 20161.56],

  // => 3.2s (1 + 2.2): ufo_sro3
  // 1 ｜ 2.25 ｜
  // => 1.4s: [-56.58, 0.37, 155.56]: ufo_uncl
  // => 2.2s: [-41.56, -3.56, 175.83]: ufo_sro4

  [-23494.06, 19473.04, 33300.35],

  // => 1.4s (0.7 + 0.7): ufo_up
  // 1 ｜ 1 ｜
  // => 0.7s: [, , -166.75]
  // => 0.7s: [25.42, -0.38, -157.48]: ufo_ro1

  [-22330.64, 12084.92, 34101.54],

  // => 2s: ufo_down
  // 1 ｜ 3 ｜
  // => 0.5s: [48.14, -0.38, -157.48]
  // => 1.5s: [48.14, -0.38, -157.48]

  [-19726.57, 6055.03, 26833.39],

  ////////////////////////////////////////////////////////////////////////

  // => 2.8: [41.79, -0.23, -162.78]: ufo_spray
  [-16105.99, -2497.85, 16468.66],

  // => 1.7: [17.93, 0, -165.7]: ufo_offset / ufo_ro2
  [-14235.76, -8715.23, 10982.07],

  // => 2.4: [-5.2, -0.37, -168.89]: ufo_ro3 / ufo_ro4
  [-11612.36, -20242.67, 10375.81],

  // => 2: [-31.46, -0.78, -170.07]: ufo_soffset / ufo_sro2
  [-10026.25, -29818.12, 12827.86],

  // => 1: [-95.55, -1, -169.05]
  [-9639.71, -31934.06, 17608.83],

  // => 1: [-155.91, -1.42, 178.94]
  [-9706.37, -29151.54, 21637.85],

  // => 1.2: [153.82, -0.77, 178]: ufo_ro1
  [-9578.38, -23388.2, 21708.39],

  // => 1: [90.77, -3.55, -178.01]: ufo_up
  [-9289.25, -20547.37, 17643.7],

  // => 1: [26.76, 0.84, -171.66]: ufo_offset / ufo_ro2
  [-8857.58, -23151.22, 13361.51],

  // => 1: [-12.93, 6.89, -163.49]
  [-8029.44, -28317.84, 13393.46],

  // => 0.9: [-26.93, 15.53, -138.26]
  [-6096.05, -31719.15, 15347.53],

  // => 0.9: [-13.06, 39.02, -105.45]: ufo_cl
  [-2344.42, -33143.57, 16820.93],

  // => 1.1: [8.4, 24.36, -73.78]
  [3256.24, -33076.28, 17034.02],

  // => 1.1: [27.57, 16.23, -42.64]
  [8290.48, -30906.72, 15424.46],

  // => 1.2: [31.25, 8.49, -7.41]: ufo_down / ufo_uncl
  [10939.68, -26899.51, 11858.97],

  // => 1.7: [9.91, 0.56, 8.51]: ufo_soffset / ufo_sro2
  [10841.3, -18953.97, 8364.09],

  // => 2.3: [1.17, 0.25, 7.94]: ufo_sro3 / ufo_sro4
  [8340, -7631.03, 7960],

  // => 1.5: []: ufo_sspray
  [8340, 0, 7960]

  // => 4: ufo_park
]

const speed = 5000

nodes.reduce((prev, current, i) => {
  const distance = (
      (current[0] - prev[0]) ** 2 +
      (current[1] - prev[1]) ** 2 +
      (current[2] - prev[2]) ** 2
    ) ** 0.5

  console.log(
    i + 1,
    ADD(current, MUL(ORIGIN, -1)).map(ROUND_100),
    ROUND_100(distance),
    '|',
    ROUND_10(distance / speed)
  )

  return current
}, ORIGIN)
